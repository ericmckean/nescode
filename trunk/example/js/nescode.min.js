/**
* @name     NESCode jsApp - nescode.min.js
* @project  NESCode
* @author <codes>      mediaHACK - http://mediahack.com
* @date         2010.12.09
* @version      101209
*
* @licence  New BSD License.
* @licence  Creative-Commons BY
* 
**/
function NESCode(a){this.scriptHost="http://nescode.googlecode.com/files/";this.settings=a;this.debug=false;this.input="";this.selectKey=16;this.startKey=13;this.cheats={contra:{code:[38,38,40,40,37,39,37,39,66,65,16,13],callback:"_30lives"}};this.customCheats=null;this.snifferSpeed=250;this.timeout=null;this.timer=3000;NESCode.currentIndex=NESCode.currentIndex||0;this.index=NESCode.currentIndex++;this.init=function(){var b=this;b.config();if(document.addEventListener){document.addEventListener("keyup",function(c){b.keyUp(c)},false)}else{if(document.attachEvent){document.attachEvent("onkeyup",function(c){b.keyUp(c)})}}setInterval(function(){b.codeSniffer()},b.snifferSpeed)};this.config=function(){if(this.settings!=null){for(var b in this.settings){this[b]=this.settings[b]}}if(this.customCheats!=null&&typeof this.customCheats=="object"){for(var b in this.customCheats){if(this.cheats[b]!=undefined){for(var c in this.customCheats[b]){this.cheats[b][c]=this.customCheats[b][c]}}else{this.cheats[b]=this.customCheats[b]}}}};this.codeSniffer=function(){var g=this;for(var c in g.cheats){var d=g.input;var f=g.cheats[c].code.join("");var b=g.cheats[c].callback||g.myCheat;var e=RegExp(f);if(e.test(d)&&d.length>0&&d.length>=f.length){if(g.debug){console.log("found "+c)}g.resetInputBuffer();if(typeof window[b]=="function"){window[b]()}else{if(typeof b=="function"){b()}else{if(typeof this[b]=="function"){this[b]()}else{if(b==undefined){if(console&&g.debug){console.log("erm, you didn't specify a cheat to perform on this code!")}else{if(console&&g.debug){console.log("I don't know how to use this cheat!")}}}}}}}}};this.resetInputBuffer=function(){if(this.debug){console.log("clearing input array")}this.input=""};this.keyUp=function(b){var c=this;c.input+=b.keyCode;if(c.debug){console.log(b.keyCode)}if(c.debug){console.log("current input: "+c.input)}if(c.timeout!=null){clearTimeout(c.timeout)}c.timeout=setTimeout(function(){c.resetInputBuffer()},c.timer)};this.myCheat=function(){var b="ULTIMATE POWER!";if(console&&console!=undefined){console.log(b)}else{alert(b)}};this._30lives=function(){var d=this;var b=document.getElementsByTagName("body")[0];var c=document.getElementById("_30lives")||document.createElement("embed");c.id="_30lives";c.src="http://nescode.googlecode.com/files/Contra_G_Probotector_StageComplete.mp3";c.autostart=true;c.hidden=true;document.getElementsByTagName("body")[0].appendChild(c)};this.init()};
